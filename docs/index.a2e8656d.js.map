{"mappings":"kpBAsBA,IAAAA,EACAC,E,iFArBA,IAAIC,EAAU,CAAC,EAoBfF,EAlBA,SAAkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,GAElC,EAaAL,EAXA,SAAiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,CACT,C,ICpBAE,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,0LCElD,MAAMC,EAAaC,IACtBC,aAAaC,QAAQ,OAAQF,EAAA,EAGpBG,EAAaC,UACtBH,aAAaI,WAAW,SAOfC,EAAqBF,eACjBG,EAAkBN,aAAaO,QAAQ,QAAU,ICb5DC,EAAUL,OAAOM,OAAEA,EAAMC,OAAEA,EAAMC,KAAEA,EAAIC,KAAEA,GAAO,MAClD,MAAMC,EAAO,CACTC,QAAS,CACLC,OAAQ,mBACR,eAAgB,oBAEpBJ,KAAMA,GAAQf,KAAKoB,UAAUL,G,OAC7BD,GAGEO,QAAYC,MAAiC,6EAAGT,SAAeI,GACrE,IAAKI,EAAIE,GACL,MAAMC,MAAM,uBAGhB,GAAIR,EACA,aAAaK,EAAIL,MAAI,EAIhBS,EAAQlB,MAAOmB,IACxB,MAAMC,QAAsBC,IACtBC,EAAcrC,OAAOqC,OAAOF,GAClC,OAAOnC,OAAOsC,oBAAoBH,GAAeI,QAAO,CAACC,EAAUC,KAC/D,GAAIJ,EAAOI,GAAO9B,QAAUuB,EAAKvB,MAC7B,OAAO6B,CAAA,GAEf,EAQSE,EAAa3B,MAAOmB,EAAWS,KACxC,MAAMC,OANsB7B,OAAOmB,UACZhB,EAAkBgB,EAAKvB,QACnCiC,MAISC,CAAiBX,GAE/BY,EAAoB,MAATF,EAAgBA,EAAQ,GAOzC,OALAE,EAAIC,KAAKJ,GAETT,EAAKU,MAAQE,EACbE,QAAQC,UAAUhB,EAAMC,IAEjBd,EAAQ,CACXC,OAAQ,eAAeY,EAAMC,KAC7BZ,OAAQ,QACRC,KAAMW,EACNV,MAAM,GACV,EAGSY,EAAWrB,eACNK,EAAQ,CAClBC,OAAQ,QACRC,OAAQ,MACRC,KAAM,KACNC,MAAM,IAIDN,EAAoBH,MAAOJ,IACpC,MAAMwB,QAAsBC,IAG5B,OAF4BpC,OAAOqC,OAAOF,GACdI,QAAOL,GAAQA,EAAKvB,QAAUA,IACvC,EAAE,EAGZuC,EAAWnC,MAAOmB,IAC3B,MAAMC,QAAsBC,IAE5B,GAAsB,OAAlBD,EAAwB,CAIxB,GAHoBnC,OAAOqC,OAAOF,GAAegB,MAC5CC,GAAWA,EAAEzC,QAAUuB,EAAKvB,OAASyC,EAAEC,WAAanB,EAAKmB,WAG1D,OAAOrB,MAAM,mCAErB,CAMA,OAJAtB,EAAUwB,EAAKvB,OAEf2C,OAAOC,SAASC,KAAO,gBAEhBpC,EAAQ,CACXC,OAAQ,QACRC,OAAQ,OACRC,KAAMW,EACNV,MAAM,GACV,EAGSiC,EAAa1C,MAAOmB,GACtBd,EAAQ,CACXC,OAAQ,eAAeY,EAAMC,KAC7BZ,OAAQ,SACRC,KAAM,KACNC,MAAM,IAKDkC,EAAS3C,MAAOmB,EAAWyB,KACpC,MAAMxB,QAAsBC,IAEtBwB,EAAc5D,OAAOqC,OAAOF,GAAeI,QAC5Ca,IAAa,GAAIA,EAAEzC,QAAUuB,EAAKvB,OAASyC,EAAES,WAAa3B,EAAK2B,SAAyD,OAAOT,CAAA,IAIpI,GAA2B,IAAvBQ,EAAY1D,OAWhB,OANA8C,QAAQC,IAAI,QAASW,EAAY,IAEjClD,EAAUwB,EAAKvB,OACXgD,IACAL,OAAOC,SAASC,KAAO,iBAEpBtB,EAVHF,MAAM,iBAUH,E,SC5HX8B,EAAiB,IAAAC,IAAoBzD,EAAA,SAAA0D,QAA6C,qBAAAC,KAAUC,W,SCA5FC,EAAiB,IAAAJ,IAAoBzD,EAAA,SAAA0D,QAA6C,qBAAAC,KAAUC,W,SCMrF,IAAIE,ECNXC,EAAiB,IAAAN,IAAoBzD,EAAA,SAAA0D,QAA6C,qBAAAC,KAAUC,WDQ5F,MAAMI,EAAoBC,SAASC,cAAc,iBAC3CC,EAAkBF,SAASC,cAAc,eAE3B,MAAhBF,GACFA,EAAaI,iBAAiB,SAAS3D,MAAO4D,IAC5CA,EAAEC,iBACFD,EAAEE,wBACI3B,EAAS4B,GAAY,GAAI,IAIjB,MAAdL,GACFA,EAAWC,iBAAiB,SAAS3D,MAAO4D,IAC1CA,EAAEC,iBACFD,EAAEE,kBACFT,QAAoBV,EAAOoB,GAAY,IAAQ,GAC3B,OAAhBV,GAAsBW,GAAA,IAW9B,MAAMC,EAAiBT,SAASC,cAAc,cAC5BD,SAASC,cAAc,QAEzC,SAASS,EAASC,GAChB,IAAIC,EACJ,OAAQD,GACN,IAAK,OACHC,EAAMC,EAAAtB,GACN,MACF,IAAK,OACHqB,EAAMC,EAAAjB,GACN,MACF,IAAK,OACHgB,EAAMC,EAAAf,GAGV,OAAOc,CACT,CAoEA,SAASE,EAAanD,GACpB8C,EAAUM,UAAY,cAEtB,IAAIC,EAAchB,SAASiB,cAAc,OAEzC,MAAMC,EAAQlB,SAASiB,cAAc,MACrCC,EAAMC,MAAMC,UAAY,SACxBF,EAAMG,UAAY1D,EAAKmB,SAEvBkC,EAAYM,OAAOJ,GAEnB,MAAMN,EAAMZ,SAASiB,cAAc,OACnCL,EAAIW,UAAY,YAChBX,EAAIY,IAAMd,EAAS/C,EAAKiD,KACxBI,EAAYM,OAAOV,GACnBH,EAAUa,OAAON,GACjBA,EAAYO,UAAY,gBAExB,MAAMlD,EAAoBV,EAAKU,MAClB,MAATA,GACJA,EAAMoD,SAAQrD,IACZ,IAAIsD,EAAY1B,SAASiB,cAAc,OACvCS,EAAUH,UAAY,YACtB,IAAII,EAAW3B,SAASiB,cAAc,KACtCU,EAASN,UAAYjD,EAAKwD,KAC1BF,EAAUJ,OAAOK,GACjBX,EAAYM,OAAOI,EAAA,GAGvB,CA/FmB,MAAf7B,GA3BJrD,iBACE,IAAIyB,QAAYvB,IACL,MAAPuB,GJlBK5B,aAAaO,QAAQ,UIoB5BiD,QAAoBV,EAAOlB,GAAK,GACZ,OAAhB4B,GAAsBW,IAE9B,CAqBEqB,GAgGF,MAAMC,EAAa9B,SAASC,cAAc,eACpC8B,EAAW/B,SAASC,cAAc,YAQxC,SAASM,EAAYvE,GACnB,MAAMI,EAAQ4D,SAASC,cAAc,UAC/BnB,EAAWkB,SAASC,cAAc,aAClCX,EAAWU,SAASC,cAAc,aACxC,IAAI+B,EAAgBhC,SAASC,cAAc,iBAE3C,MAAMtC,EAAY,CAChBvB,MAAOA,EAAM6F,MACb3C,SAAUA,EAAS2C,OAIrB,GAAIjG,EAAU,CACZ2B,EAAK,SAAcmB,EAASmD,MAC5B,IAAIV,EACJA,EAAYS,EAASE,UAAU,GAC/BzE,MAAM8D,GACN5D,EAAK,IAAS4D,CAChB,CAEA,OAAO5D,CACT,CA5BAoE,EAAIG,UAAUC,IAAI,QAClBL,EAAM3B,iBAAiB,SAAS,KAC9B4B,EAAIG,UAAUC,IAAI,WAlGpB3F,iBACE,MAAMoB,QAAsBC,IAEtBuE,EADoB3G,OAAOqC,OAAOF,GACnByE,MAAK,CAACC,EAAQC,IAC7BD,EAAEjE,OAASkE,EAAElE,MACRkE,EAAElE,MAAM1C,OAAS2G,EAAEjE,MAAM1C,OACvB2G,EAAEjE,OACJ,EACEkE,EAAElE,MACJ,EAEA,IAIX+D,EAAKX,SAAQ,CAACe,EAAOtE,KACnB,MAAMuE,EAAWzC,SAASiB,cAAc,OAClC7C,EAAO4B,SAASiB,cAAc,OACpC7C,EAAKmD,UAAY,kBAAoBrD,EACrC,MAAM0C,EAAMZ,SAASiB,cAAc,OACnCL,EAAIW,UAAY,mBAAqBrD,EACrC0C,EAAIY,IAAMd,EAAS8B,EAAM5B,KACzBnC,QAAQC,IAAIkC,EAAIY,KAGhBpD,GAAMkD,OAAOV,GACb6B,EAASlB,UAAY,gBAAkBrD,EAEvC,MAAMgD,EAAQlB,SAASiB,cAAc,MACrCC,EAAMK,UAAY,YAAcrD,EAChCgD,EAAMG,UAAYmB,EAAM1D,SAExBV,EAAKkD,OAAOJ,GACZ,MAAM7C,EAAQ2B,SAASiB,cAAc,MACrC5C,EAAMkD,UAAY,kBAAoBrD,EACnB,MAAfsE,EAAMnE,MACRA,EAAMgD,UAAY,eAElBhD,EAAMgD,UAAY,UAAYmB,EAAMnE,MAAM1C,OAC1C6G,EAAMnE,MAAMqE,WAEdtE,EAAKkD,OAAOjD,GAEZoE,EAASnB,OAAOlD,GAChBqC,GAAWa,OAAOmB,EAAA,IAIF,OAAdhC,GACFA,EAAUN,iBAAiB,SAAS3D,MAAO4D,IACzCA,EAAEC,iBACFD,EAAEE,kBACF,MAAMqC,EAASvC,EAAEuC,OAEjBP,EAAKX,SAAQ,CAAC9D,EAAWO,KACnByE,EAAOT,UAAUU,SAAS,OAAS1E,IACrC4C,EAAanD,EAAA,GAEjB,GAGN,CAwCAkF,GAyBA,IAAIC,EAAY9C,SAASC,cAAc,WAEhCzD,eAAegE,IAEpB,IAAIuC,EAAiB/C,SAASC,cAAc,cACxC+C,EAAOhD,SAASC,cAAc,SAC9BgD,EAAajD,SAASiB,cAAc,UAEpCiC,EAAalD,SAASiB,cAAc,UACpCkC,EAAWnD,SAASoD,eAAevD,EAAYf,UAEnDoE,EAAWG,YAAYF,GAEvB,IAAIG,EAAetD,SAASiB,cAAc,UACtCsC,EAAavD,SAASoD,eAAe,UACzCE,EAAaD,YAAYE,GACzB,IAAIC,EAAexD,SAASiB,cAAc,UACtCwC,EAAazD,SAASoD,eAAe,UACzCI,EAAaH,YAAYI,GACzBR,EAAWI,YAAYH,GACvBD,EAAWI,YAAYC,GACvBL,EAAWI,YAAYG,GAEvBR,GAAMK,YAAYJ,GAElBxE,QAAQC,IAAI,MACZqE,GAAWW,SACXZ,GAAWZ,UAAUC,IAAI,QACzBmB,EAAanD,iBAAiB,SAAS,SAAUC,GAC/C6C,EAAWS,SACXjF,QAAQC,IAAI,kBACZsE,GAAM1B,OAAOyB,GACbD,GAAWY,SACX3E,OAAOC,SAASC,KAAO,gBACvB1C,GACF,IACAiH,EAAarD,iBAAiB,SAAS3D,eAAgB4D,GACrDA,EAAEC,uBACInB,EAAWW,GAAa8D,MAAKrB,GAAKvD,OAAOC,SAASC,KAAO,iBACjE,IAEyB,MAArBY,EAAYxB,QACdwB,EAAYxB,MAAMqE,UAClBQ,EAAW/C,iBAAiB,SAAS,SAAUC,GAC7CU,EAAajB,EACf,IAGJ,CAEA,MAAM+D,EAAc5D,SAASC,cAAc,kBACrC4D,EAAY7D,SAASC,cAAc,cACzC2D,EAAOzD,iBAAiB,SAAS3D,UAC/BiC,QAAQC,IAAImF,EAAK5B,aACX9D,EAAW0B,EAAa,CAAE+B,KAAMiC,EAAK5B,QAC3ClD,OAAOC,SAASC,KAAO,mBAGzB6D,GAAW3C,iBAAiB,SAAUC,IACpC2B,EAAIG,UAAUwB,OAAO","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-65695e612db72de4.js","src/ts/lib/auth.ts","src/ts/lib/api.ts","node_modules/@parcel/runtime-js/lib/runtime-a7cc07b24b12cb05.js","node_modules/@parcel/runtime-js/lib/runtime-a3d32a622ae18219.js","src/ts/index.ts","node_modules/@parcel/runtime-js/lib/runtime-8d198540b195b137.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"ff4VL\\\":\\\"index.a2e8656d.js\\\",\\\"5FqY5\\\":\\\"img0.0209cc49.jpg\\\",\\\"2MmLe\\\":\\\"img1.a33b6e0d.jpg\\\",\\\"3CFfE\\\":\\\"img2.3de99596.jpg\\\"}\"));","import { findUserFromEmail } from \"./api\";\r\n    \r\nexport const storeUser = (email : string) => {\r\n    localStorage.setItem('user', email)\r\n};\r\n\r\nexport const removeUser = async () => {\r\n    localStorage.removeItem('user');\r\n};\r\n\r\nexport const hasLoggedIn = () => {\r\n    return localStorage.getItem('user');\r\n}\r\n\r\nexport const getUserFromStorage = async () => {\r\n    return await findUserFromEmail(localStorage.getItem('user') + \"\");\r\n};","import { storeUser, removeUser } from \"./auth\";\r\n\r\nconst fetcher = async ({ header, method, body, json = true }: any) => {\r\n    const init = {\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-type\": \"application/json\"\r\n        },\r\n        body: body && JSON.stringify(body),\r\n        method,\r\n    }\r\n\r\n    const res = await fetch(process.env.DATABASE_URL + `${header}.json`, init);\r\n    if (!res.ok) {\r\n        throw alert(\"API failed to fetch\");\r\n    }\r\n\r\n    if (json) {\r\n        return await res.json();\r\n    }\r\n};\r\n\r\nexport const getId = async (user: any) => {\r\n    const existingUsers = await getUsers();\r\n    const values: any = Object.values(existingUsers);\r\n    return Object.getOwnPropertyNames(existingUsers).filter((usr: any, index) => {\r\n        if (values[index].email === user.email) {\r\n            return usr;\r\n        }\r\n    });\r\n}\r\n\r\nexport const getPostsFromUser = async (user: any) => {\r\n    const usr: any = await findUserFromEmail(user.email);\r\n    return usr.posts;\r\n}\r\n\r\nexport const uploadPost = async (user: any, post: any) => {\r\n    const posts = await getPostsFromUser(user)\r\n\r\n    const arr: any = posts != null ? posts : [];\r\n\r\n    arr.push(post);\r\n\r\n    user.posts = arr;\r\n    console.log(await getId(user));\r\n\r\n    return fetcher({\r\n        header: `users/${await getId(user)}`,\r\n        method: \"PATCH\",\r\n        body: user,\r\n        json: true,\r\n    });\r\n}\r\n\r\nexport const getUsers = async () => {\r\n    return (await fetcher({\r\n        header: \"users\",\r\n        method: \"GET\",\r\n        body: null,\r\n        json: true,\r\n    }));\r\n}\r\n\r\nexport const findUserFromEmail = async (email: string) => {\r\n    const existingUsers = await getUsers();\r\n    const userArr: Array<any> = Object.values(existingUsers);\r\n    const emailExists = userArr.filter(user => user.email === email);\r\n    return emailExists[0];\r\n}\r\n\r\nexport const register = async (user: any) => {\r\n    const existingUsers = await getUsers();\r\n\r\n    if (existingUsers !== null) {\r\n        const emailExists = Object.values(existingUsers).find(\r\n            (u: any) => u.email === user.email || u.username === user.username\r\n        );\r\n        if (emailExists) {\r\n            return alert(\"Email or username already exists\");\r\n        }\r\n    }\r\n\r\n    storeUser(user.email);\r\n\r\n    window.location.href = \"../index.html\";\r\n\r\n    return fetcher({\r\n        header: \"users\",\r\n        method: \"POST\",\r\n        body: user,\r\n        json: true,\r\n    });\r\n};\r\n\r\nexport const deleteUser = async (user: any) => {\r\n    return fetcher({\r\n        header: `users/${await getId(user)}`,\r\n        method: \"DELETE\",\r\n        body: null,\r\n        json: true,\r\n    });\r\n    \r\n};\r\n\r\nexport const signin = async (user: any, navigate: boolean) => {\r\n    const existingUsers = await getUsers();\r\n\r\n    const emailExists = Object.values(existingUsers).filter(\r\n        (u: any) => { if (u.email === user.email && u.password === user.password/*comparePasswords(u.password, user.password)*/) return u; }\r\n    );\r\n\r\n\r\n    if (emailExists.length === 0) {\r\n        alert(\"User not found\");\r\n        return;\r\n    }\r\n\r\n    console.log(\"login\", emailExists[0]);\r\n\r\n    storeUser(user.email);\r\n    if (navigate)\r\n        window.location.href = \"../index.html\";\r\n\r\n    return user;\r\n};\r\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"5FqY5\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"2MmLe\")).toString();","import { register, signin, uploadPost, getUsers, deleteUser } from \"./lib/api\";\r\nimport { getUserFromStorage, hasLoggedIn, removeUser} from \"./lib/auth\";\r\nimport img0 from '../images/img0.jpg';\r\nimport img1 from '../images/img1.jpg';\r\nimport img2 from '../images/img2.jpg';\r\n\r\nexport let currentUser: any;\r\n\r\nconst registerUser: any = document.querySelector('.registerUser');\r\nconst signinUser: any = document.querySelector('.signinUser');\r\n\r\nif (registerUser != null)\r\n  registerUser.addEventListener(\"click\", async (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    await register(getUserData(true));\r\n\r\n  })\r\n\r\nif (signinUser != null)\r\n  signinUser.addEventListener(\"click\", async (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    currentUser = await signin(getUserData(false), true);\r\n    if (currentUser !== null) loadUserSignedin();\r\n  })\r\n\r\nasync function checkForUser() {\r\n  let usr = await getUserFromStorage();\r\n  if (usr != null)\r\n  if (hasLoggedIn()) {\r\n    currentUser = await signin(usr, false);\r\n    if (currentUser !== null) loadUserSignedin();\r\n  }\r\n}\r\nconst container: any = document.querySelector('.container');\r\nconst main: any = document.querySelector('main');\r\n\r\nfunction getImage(type: string) {\r\n  let img;\r\n  switch (type) {\r\n    case \"img0\":\r\n      img = img0;\r\n      break;\r\n    case \"img1\":\r\n      img = img1;\r\n      break;\r\n    case \"img2\":\r\n      img = img2;\r\n      break;\r\n  }\r\n  return img;\r\n}\r\n\r\nif (currentUser == null)\r\n  checkForUser();\r\n\r\nasync function loadUserList() {\r\n  const existingUsers = await getUsers();\r\n  let userArr: Array<any> = Object.values(existingUsers);\r\n  const list = userArr.sort((a: any, b: any) => {\r\n    if (a.posts && b.posts) {\r\n      return b.posts.length - a.posts.length;\r\n    } else if (a.posts) {\r\n      return -1;\r\n    } else if (b.posts) {\r\n      return 1;\r\n    } else {\r\n      return 0;\r\n    }\r\n  });\r\n\r\n  list.forEach((users, index) => {\r\n    const postCard = document.createElement('div');\r\n    const post = document.createElement('div');\r\n    post.className = \"postLayout card\" + index;\r\n    const img = document.createElement('img');\r\n    img.className = \"userProfile card\" + index;\r\n    img.src = getImage(users.img);\r\n    console.log(img.src);\r\n\r\n\r\n    post?.append(img);\r\n    postCard.className = \"postCard card\" + index;\r\n\r\n    const title = document.createElement('h3');\r\n    title.className = \"post card\" + index;\r\n    title.innerText = users.username;\r\n\r\n    post.append(title);\r\n    const posts = document.createElement('h4');\r\n    posts.className = \"postAmount card\" + index;\r\n    if (users.posts == null) {\r\n      posts.innerText = \"Posts: none\";\r\n    } else {\r\n      posts.innerText = \"Posts: \" + users.posts.length;\r\n      users.posts.reverse();\r\n    }\r\n    post.append(posts);\r\n\r\n    postCard.append(post);\r\n    container?.append(postCard);\r\n\r\n  })\r\n\r\n  if (container !== null)\r\n    container.addEventListener('click', async (e: any) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n      const target = e.target as Element;\r\n\r\n      list.forEach((user: any, index) => {\r\n        if (target.classList.contains(\"card\" + index)) {\r\n          loadPostList(user);\r\n        }\r\n      });\r\n    });\r\n\r\n}\r\n\r\nfunction loadPostList(user: any) {\r\n  container.innerHTML = \"<div></div>\";\r\n\r\n  let userProfile = document.createElement('div');\r\n\r\n  const title = document.createElement('h1');\r\n  title.style.textAlign = \"center\";\r\n  title.innerText = user.username;\r\n\r\n  userProfile.append(title);\r\n\r\n  const img = document.createElement('img');\r\n  img.className = \"userImage\";\r\n  img.src = getImage(user.img)\r\n  userProfile.append(img);\r\n  container.append(userProfile);\r\n  userProfile.className = \"postContainer\";\r\n\r\n  const posts: Array<any> = user.posts;\r\n  if (posts != null)\r\n  posts.forEach(post => {\r\n    let postFrame = document.createElement('div');\r\n    postFrame.className = \"postFrame\"\r\n    let postText = document.createElement('p');\r\n    postText.innerText = post.text;\r\n    postFrame.append(postText);\r\n    userProfile.append(postFrame);\r\n  })\r\n\r\n}\r\n\r\nconst close: any = document.querySelector('#close-post');\r\nconst box: any = document.querySelector('#postBox');\r\nbox.classList.add(\"hide\");\r\nclose.addEventListener(\"click\", () => {\r\n  box.classList.add(\"hide\");\r\n})\r\n\r\nloadUserList();\r\n\r\nfunction getUserData(register: boolean) {\r\n  const email = document.querySelector('.email') as HTMLInputElement;\r\n  const username = document.querySelector('.username') as HTMLInputElement;\r\n  const password = document.querySelector('.password') as HTMLInputElement;\r\n  var selected: any = document.querySelector('input:checked');\r\n\r\n  const user: any = {\r\n    email: email.value,\r\n    password: password.value,\r\n  }\r\n\r\n\r\n  if (register) {\r\n    user[\"username\"] = username.value;\r\n    var className = \"\";\r\n    className = selected.classList[0];\r\n    alert(className);\r\n    user[\"img\"] = className;\r\n  }\r\n\r\n  return user;\r\n}\r\n\r\nlet uploadBtn = document.querySelector('.upload');\r\n\r\nexport async function loadUserSignedin() {\r\n\r\n  let signinBtn: any = document.querySelector('.signinBtn');\r\n  let btns = document.querySelector('.btns');\r\n  let userSelect = document.createElement('select');\r\n\r\n  let userOption = document.createElement('option');\r\n  let userText = document.createTextNode(currentUser.username);\r\n\r\n  userOption.appendChild(userText);\r\n\r\n  let logoutOption = document.createElement('option');\r\n  let logoutText = document.createTextNode(\"Logout\");\r\n  logoutOption.appendChild(logoutText);\r\n  let deleteOption = document.createElement('option');\r\n  let deleteText = document.createTextNode(\"Delete\");\r\n  deleteOption.appendChild(deleteText);\r\n  userSelect.appendChild(userOption);\r\n  userSelect.appendChild(logoutOption);\r\n  userSelect.appendChild(deleteOption);\r\n\r\n  btns?.appendChild(userSelect);\r\n\r\n  console.log(\"he\");\r\n  signinBtn?.remove();\r\n  uploadBtn?.classList.add('show');\r\n  logoutOption.addEventListener('click', function (e) {\r\n    userSelect.remove();\r\n    console.log(\"Logging out...\");\r\n    btns?.append(signinBtn);\r\n    uploadBtn?.remove();\r\n    window.location.href = \"../index.html\";\r\n    removeUser();\r\n  });\r\n  deleteOption.addEventListener('click', async function (e) {\r\n    e.preventDefault();\r\n    await deleteUser(currentUser).then(a => window.location.href = \"../index.html\");\r\n  });\r\n\r\n  if (currentUser.posts != null) {\r\n    currentUser.posts.reverse();\r\n    userOption.addEventListener('click', function (e) {\r\n      loadPostList(currentUser);\r\n    });\r\n  }\r\n\r\n}\r\n\r\nconst submit: any = document.querySelector('#submit-button');\r\nconst text: any = document.querySelector('#post-text');\r\nsubmit.addEventListener(\"click\", async () => {\r\n  console.log(text.value);\r\n  await uploadPost(currentUser, { text: text.value })\r\n  window.location.href = \"../index.html\";\r\n})\r\n\r\nuploadBtn?.addEventListener(\"click\", (e) => {\r\n  box.classList.remove(\"hide\");\r\n})","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"3CFfE\")).toString();"],"names":["$18c11f3350a906ea$export$6503ec6e8aabbaf","$18c11f3350a906ea$export$f7ad0328861e2f03","$18c11f3350a906ea$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$b202d9fb56f0324d$export$40e2ef2cb1e7c393","email","localStorage","setItem","$b202d9fb56f0324d$export$d006f7a482b957ad","async","removeItem","$b202d9fb56f0324d$export$749108cc9a9ad565","$038b03d7e8996720$export$25619fe46b3e8158","getItem","$038b03d7e8996720$var$fetcher","header","method","body","json","init","headers","Accept","stringify","res","fetch","ok","alert","$038b03d7e8996720$export$218c8c3169c024d2","user","existingUsers","$038b03d7e8996720$export$925a4945a6cd0f3e","values","getOwnPropertyNames","filter","usr","index","$038b03d7e8996720$export$13ba04fdd9bedd7b","post","posts","$038b03d7e8996720$export$8c0f0943f09c1146","arr","push","console","log","$038b03d7e8996720$export$6503ec6e8aabbaf","find","u","username","window","location","href","$038b03d7e8996720$export$7d0f10f273c0438a","$038b03d7e8996720$export$54f63e0bb65a6adc","navigate","emailExists","password","$73a480dafb617909$exports","URL","resolve","url","toString","$f597b9a082bf8f7d$exports","$4aa1cd84f89e5a94$export$5671b2216dc5440f","$c01f81ec13116041$exports","$4aa1cd84f89e5a94$var$registerUser","document","querySelector","$4aa1cd84f89e5a94$var$signinUser","addEventListener","e","preventDefault","stopPropagation","$4aa1cd84f89e5a94$var$getUserData","$4aa1cd84f89e5a94$export$9178578394ab4231","$4aa1cd84f89e5a94$var$container","$4aa1cd84f89e5a94$var$getImage","type","img","$parcel$interopDefault","$4aa1cd84f89e5a94$var$loadPostList","innerHTML","userProfile","createElement","title","style","textAlign","innerText","append","className","src","forEach","postFrame","postText","text","$4aa1cd84f89e5a94$var$checkForUser","$4aa1cd84f89e5a94$var$close","$4aa1cd84f89e5a94$var$box","selected","value","classList","add","list","sort","a","b","users","postCard","reverse","target","contains","$4aa1cd84f89e5a94$var$loadUserList","$4aa1cd84f89e5a94$var$uploadBtn","signinBtn","btns","userSelect","userOption","userText","createTextNode","appendChild","logoutOption","logoutText","deleteOption","deleteText","remove","then","$4aa1cd84f89e5a94$var$submit","$4aa1cd84f89e5a94$var$text"],"version":3,"file":"index.a2e8656d.js.map"}